<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Sanity Savor</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" href="static/style.css">
</head>

<body>
    <nav class="navbar navbar-light bg-light d-flex justify-content-center">
        <span class="navbar-brand mb-0 h1">The Sanity Saver</span>
    </nav>
    <div class="container mt-5 pt-3 d-flex justify-content-center">

        <div>
            <div class="left">

                <h1>Here are your results</h1>
                <h4 class="mt-5">Check out the GitHub Repo:</h4>
                <a href="https://github.com/Laith-Alayassa/Odyssey-helper.git"> <button
                        class="w-75 m-0 btn_message ml-1">
                        Repo</button> </a>

                <h5 style="font-size: medium;" class="mt-5">If you want to contribute, <br>
                    please make a pull request!</h5>

                <h6 class="mt-5">Made By: <br>
                    Laith Alayassa</h6>
            </div>


        </div>
        <div class="student-message w-100">
            {% for email in emails %}
            <h1 class="pl-5">{{ loop.index }}</h1>

            <div class="email-box"></div>
            <div class="text-area d-flex justify-content-center">
                <textarea class="message-text w-75 p-4" id="message-area"
                    data-index="{{loop.index}}">{{emails[email][-1]}}</textarea>
            </div>
            <div class="d-flex justify-content-center mt-3">
                <textarea id="email" class="email-box w-75 pl-4 pt-1" rows="1"
                    data-index="{{loop.index}}">{{ emails[email][-2] }}</textarea>
            </div>
            <div class="buttons d-flex  justify-content-center mt-3 mb-5">
                <button class="w-25 m-0 btn_email mr-1" id="copy-email" data-index="{{loop.index}}"> Copy Email</button>
                <button class="w-25 m-0 btn_message ml-1" id="copy-message" data-index="{{loop.index}}"> Copy
                    Message</button>
            </div>
            {% endfor %}
        </div>
    </div>
    </div>
    <script>

        // copy message
        var message_btns = document.getElementsByClassName("btn_message");

        var myFunction = function () {
            var index = this.getAttribute("data-index");
            console.log(`data index is ${index}`);
            document.querySelector(`.message-text[data-index="${index}"]`).select();
            document.execCommand('copy');
        };

        for (var i = 0; i < message_btns.length; i++) {
            message_btns[i].addEventListener('click', myFunction, false);
        }



        // Copy email
        var message_btns = document.getElementsByClassName("btn_email");

        var myFunction = function () {
            var index = this.getAttribute("data-index");
            console.log(`data index is ${index}`);
            document.querySelector(`.email-box[data-index="${index}"]`).select();
            document.execCommand('copy');
        };

        for (var i = 0; i < message_btns.length; i++) {
            message_btns[i].addEventListener('click', myFunction, false);
        }

    </script>
</body>

</html>